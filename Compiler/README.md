# Compiler Labs

Operating System: Windows 10 x64

## Lab1: Lexical Analyzer

Target: generate a lexical analyzer that can analyze ANSI C program with `flex`

Input: C Program

Ouput: sequence of tokens

References:

[GNU C Manual](https://www.gnu.org/software/gnu-c-manual/gnu-c-manual.pdf)

[ANSI C Lex Specification](https://www.lysator.liu.se/c/ANSI-C-grammar-l.html)

[Better ANSI C Lex Specification](http://www.quut.com/c/ANSI-C-grammar-l-2011.html#comment)

[Get started](http://www.cnblogs.com/itech/archive/2012/03/04/2375746.html)

Notes:

1. Install `winflexbison3` with `chocolatey` and `gcc` with Mingw and make sure `win_flex` and `gcc` can be accessed from path.
2. Write a lex named `test.l`
3. Run `compile.ps1` to compile the lex file into an executable `test.exe`
4. Run `./test.exe` to start the parsing!

Predefined scripts:

`compile.ps1` parses `test.l` to `lex.yy.c` using `win_flex` and then compiles `lex.yy.c` to `test.exe` using `gcc`

`run.ps1` always runs `compile.ps1` first. `test.exe` will be executed if no arg is provided. If an arg is provided, it will be intepreted as a **filename**. The file would be read and the content will be piped into `test.exe`.
   
Pitfalls:

1. On Windows, since no lex libraries are installed with `winflexbison3`, to compile the `lex.yy.c` generated by flex, the following code snippet must be appended into the third part of the lex file (to provide a definition of yywrap and main function)

```c
int yywrap() 
{ 
   return(1); 
} 

int main()
{
    yylex();
}
```