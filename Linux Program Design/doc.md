# Linux程序设计第三次作业

161250010 陈俊达

# 0. 通用

本次作业使用C++编写，可在Linux环境下使用C++编译运行。也可以在本目录下运行`./compile.sh wc`或者`./compile.sh ls`编译程序。

已经在Ubuntu 18.04.1 LTS in Windows Subsystem for Linux环境下，使用gcc 7.3版本下编译通过并正常运行。

# 1. wc

## 1.1 编译

`./compile.sh wc`或者`g++ wc.cpp -o wc`

## 1.2 运行

`./wc test.txt`

> 3 92 601 test.txt

## 1.3 设计说明

从`argv[1]`中读到文件名，并使用ifstream将文件打开后，一个字节一个字节地读取文件，每读一个字节，**字节数**++，如果遇到了\n，**行数**++。再次判断这个字节，如果这个字节是非空字符时，**当前单词长度**++；当遇到空字符时（使用`isspace`），如果**当前单词长度**>0，那么**单词个数**++并归零**当前单词长度**；否则（即**当前单词长度**==0），那么什么都不做。当文件读取结束后，如果**当前单词长度**>0，那么**单词个数**++。最后依次输出行数，单词个数和字节数。

## 1.4 与示例代码对比

示例代码

https://www.gnu.org/software/cflow/manual/html_node/Source-of-wc-command.html

不同点：

- 由于示例代码是C代码，所以使用的库不同

- 计算单词数的方法不同

在示例代码中，当遇到一个非空字符的时候，即直接增加单词个数，然后跳到下一个空白符（`getword`函数）。而在我的代码中，是首先记录**当前单词长度**，在遇到空白符时，再增加单词个数。

- 判断字符是否为单词组成元素的方法不同

在示例代码中，是使用`isalpha`函数判断的（示例代码的`isword`函数）；而在我的代码中，是使用`!isspace(c)`判断的。